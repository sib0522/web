{{define "file_upload"}}
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>File Upload Page</title>
    <link href="https://cdn.jsdelivr.net/npm/simple-datatables@7.1.2/dist/style.min.css" rel="stylesheet" />
    <link href="http://localhost:1323/web/public/css/styles.css" rel="stylesheet" />
    <script src="https://use.fontawesome.com/releases/v6.3.0/js/all.js" crossorigin="anonymous"></script>
</head>
<body>
{{template "header_navi" .Common.IsLogin }}
<div id="layoutSidenav">
    {{template "side_navi" .Common }}
    <div id="layoutSidenav_content">
        <main>
            <div class="container-fluid px-4">
                <h1 class="mt-4">Resource</h1>
                <ol class="breadcrumb mb-4">
                    <li class="breadcrumb-item"><a href="/">Dashboard</a></li>
                    <li class="breadcrumb-item active">Resource</li>
                </ol>
                <h2 class="mt-4">Upload</h2>
                <div class="card mb-4">
                    <div class="card-body">
                        <p class="mb-0">
                            <form action="/upload/images" method="post" enctype="multipart/form-data">
                                Upload: <input type="file" name="file" multiple><br><br>
                                <input type="submit" value="リソースをアップロードする">
                            </form>
                        </p>
                    </div>
                </div>
                <h2 class="mt-4">Download</h2>
                <div class ="card mb-4">
                    <div class="card-body">
                        <p class="mb-0">
                            <input class="btn btn-primary" id="submit" type="button" value="リソースを更新する" onclick="f()"/>
                            <script>
                                function f() {
                                    const btn = document.getElementById("submit")
                                    $.ajax({
                                        type:'post',
                                        url:'/resource/download',
                                        async:false,
                                        dataType:'html',
                                    }).done(function (data){
                                        btn.setAttribute("disabled","true")
                                        alert("リソースを更新しました")
                                        //location.replace("/")
                                    }).fail(function (data){
                                        alert("更新失敗")
                                    })
                                }
                            </script>
                        </p>
                    </div>
                </div>
            </div>
        </main>
        {{template "footer_label"}}
    </div>
</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-3.0.0.min.js"></script>
</body>
</html>
{{end}}